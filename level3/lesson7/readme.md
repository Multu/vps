# Пирамиды

Пирамида (heap; в русскоязычных переводах также применяется менее официальное "куча") -- это ослабленная версия двоичных деревьев. Она отличается от классической версии тем, что во-первых, реализуется на основе массива (считается, что дерево хранится полностью), во-вторых, значение ключа родителя всегда больше значений ключей потомков, и в-третьих, нету упорядоченности левого и правого ключей. Фактически, это дерево, которое некоторым образом упорядочено сверху вниз.

Чаще всего используются бинарные кучи.

![](https://skillsmart.ru/algo/15-121-cm/heap172.png)

Такая схема довольно хаотична -- например, мы можем выполнять поиск ключа только за время O(N), так как приходится сканировать весь массив. Но зато мы можем быстро удалить максимальный узел (он всегда корневой), а также быстро вставлять элементы, так как не требуется соблюдать строгие правила упорядоченности.

Зачем нужны пирамиды? Они эффективно реализуют так называемые приоритетные очереди, когда надо максимально быстро обслужить объект с максимальным приоритетом, а также учитывать и ранжировать все поступающие объекты.

Удаление максимально приоритетного узла выполняется очевидно просто -- ликвидируем корневой узел с индексом 0. Но кого-то обязательно надо поставить его преемником.

Для этого:
- выбираем самый последний существующий элемент массива (по сути, крайний правый на нижнем уровне);
- перемещаем его в корень;
- начинаем сдвигать элемент вниз по дереву (моделируем этот процесс движения по дереву с помощью индексов узла в массиве): если ниже текущего узла "максимальный" узел больше текущего, меняем местами текущий элемент с этим максимальным, и продолжаем данное действие;
- останавливаемся, когда у родителя будет больший ключ, а у двух наследников -- меньшие.

Аналогично выполняется и процесс вставки. Новый элемент помещаем в самый низ массива, в первый свободный слот, и затем поднимаем его вверх по дереву, останавливаясь в позиции, когда выше у родителя будет больший ключ, а ниже у обоих наследников -- меньшие.

Такие процессы называются операциями просеивания вниз и вверх.

При создании пирамиды с нуля с помощью подобной операции вставки сложность в наихудшем случае будет O(log2 N) (количество передвижений узла по дереву не превысит его глубину), а в наилучшем O(1) (элементы сразу встают на свои позиции).

### Задание

Реализуйте бинарную пирамиду по аналогии с деревом на базе массива. Создавайте её операцией Make-Heap -- формированием из последовательного набора входных значений.

Добавьте методы удаления максимально приоритетного элемента и вставки нового элемента.