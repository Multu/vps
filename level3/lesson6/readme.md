# Строим сбалансированные двоичные деревья поиска (2)

В прошлом занятии мы создавали массив для хранения структуры сбалансированного двоичного дерева. Теперь мы можем сразу использовать его как готовое "дерево", если у нас есть класс, тип данных "двоичное дерево", реализованный по схеме с помощью массива (реальных узлов в нём нету).

Если же нам нужно построить сбалансированное двоичное дерево, состоящее из объектов-узлов, то проще воспользоваться алгоритмом построения такого дерева из отсортированного по возрастанию массива.

Такое построение выполняется тривиально: в рекурсивном алгоритме мы выбираем корневой элемент (центральный в отсортированном массиве), после чего применяем этот алгоритм к левому и правому поддеревьям (левой и правой частям массива). Соответственно, из корневого элемента мы создаём текущий узел, а левым и правым его узлами делаем поддеревья, которые возвращают эти два рекурсивных вызова.

Например, пусть это будет функция F(родитель, диапазон в массиве):
- создаёте в дереве новый узел A с текущим "корневым" (центральным) значением, которому указываете родительский узел (передаётся в параметрах);
- вызываете рекурсивно F() с диапазоном массива слева от корня и параметром-узлом A как родительским, результат этой F() присваиваете левому наследнику A;
- вызываете рекурсивно F() с диапазоном массива справа от корня и параметром-узлом A как родительским, результат этой F() присваиваете правому наследнику A;
- возвращаете узел A как результат работы F().

В процессе построения проставьте глубину каждого узла: у корня она равна 0, а у каждого потомка на единицу выше, чем у родителя.

Во-вторых, убедитесь, действительно ли дерево получилось правильным: для каждого узла ключ левого потомка должен быть меньше его ключа, а ключ правого потомка должен быть больше или равен ключу родителя.

В-третьих, убедитесь, действительно ли дерево получилось сбалансированным, что определяется тремя правилами:
- правое поддерево каждого узла сбалансировано;
- левое поддерево каждого узла сбалансировано;
- разница между глубинами левого и правого поддеревьев не превышает единицы (или, проще говоря, левое и правое поддеревья равны по длинами или отличаются не более чем на одну ветку).

![](https://skillsmart.ru/algo/15-121-cm/bbst.jpg)

